## 5.1.1 I-O设备的概念和分类

![image-20230910211221453](assets/image-20230910211221453.png)

![image-20230910211329222](assets/image-20230910211329222.png)

![image-20230910211555897](assets/image-20230910211555897.png)



## 5.1.2 I-O控制器

![image-20230911201313569](assets/image-20230911201313569.png)

![image-20230911201651712](assets/image-20230911201651712.png)

![image-20230911202909843](assets/image-20230911202909843.png)

控制线：向IO设备发出一个指令

地址线：CPU告诉IO逻辑自己要控制的是哪一个设备，每个设备有一个地址

数据总线：CPU会通过数据总线把数据放到数据寄存器，IO逻辑从数据寄存器取数据

控制寄存器：CPU发出的IO指令可能有参数，参数就放在控制寄存器中，IO逻辑从这里取参数

状态寄存器：IO逻辑会向状态寄存器中写入设备的状态

![image-20230911203104815](assets/image-20230911203104815.png)

![image-20230911203419146](assets/image-20230911203419146.png)

![image-20230911203512890](assets/image-20230911203512890.png)

## 5.1.3 IO控制方式

![image-20230911203608243](assets/image-20230911203608243.png)

![image-20230911203838362](assets/image-20230911203838362.png)

早期的一种控制方式 ，关键字：轮询

![image-20230911204429988](assets/image-20230911204429988.png)

![image-20230911204609442](assets/image-20230911204609442.png)

![image-20230911204941308](assets/image-20230911204941308.png)

解决了CPU资源大量浪费问题

![image-20230911205222226](assets/image-20230911205222226.png)

DMA:数据直接从设备到内存，不再需要经过CPU

![image-20230911205555929](assets/image-20230911205555929.png)

![image-20230911205907154](assets/image-20230911205907154.png)

![image-20230911210101405](assets/image-20230911210101405.png)

解决了DMA方式的缺点，CPU可以一次性给出多条指令让通道依次去执行，CPU干预频率降低，可以将它理解为任务清单

![image-20230911210424236](assets/image-20230911210424236.png)

![image-20230911210528780](assets/image-20230911210528780.png)

## 5.1.4 IO软件层级结构

![image-20230911210915086](assets/image-20230911210915086.png)

![image-20230911211304284](assets/image-20230911211304284.png)

![image-20230911211535421](assets/image-20230911211535421.png)

![image-20230911211714140](assets/image-20230911211714140.png)

![image-20230911211847970](assets/image-20230911211847970.png)

## 5.1.5 输入输出应用程序接口和驱动程序接口

用户层的应用程序无法用一个统一的接口完成所有类型设备的IO

![image-20230911212457406](assets/image-20230911212457406.png)

![image-20230911213224490](assets/image-20230911213224490.png)

![image-20230911213402758](assets/image-20230911213402758.png)

![image-20230911213541044](assets/image-20230911213541044.png)



## 5.2.1 IO核心子系统

![image-20230911213845751](assets/image-20230911213845751.png)



![image-20230911213910863](assets/image-20230911213910863.png)



## 5.2.2 假脱机技术

![image-20230911214210004](assets/image-20230911214210004.png)

![image-20230911214423692](assets/image-20230911214423692.png)

![image-20230911214818042](assets/image-20230911214818042.png)

![image-20230911214923944](assets/image-20230911214923944.png)

## 5.2.3 设备的分配与回收

![image-20230912203302659](assets/image-20230912203302659.png)

![image-20230912204217938](assets/image-20230912204217938.png)

![image-20230912204359735](assets/image-20230912204359735.png)

![image-20230912204530271](assets/image-20230912204530271.png)

![image-20230912204622290](assets/image-20230912204622290.png)

![image-20230912204706210](assets/image-20230912204706210.png)



![image-20230912204749725](assets/image-20230912204749725.png)

![image-20230912205124952](assets/image-20230912205124952.png)

![image-20230912205344939](assets/image-20230912205344939.png)

![image-20230912205420549](assets/image-20230912205420549.png)

![image-20230912205611698](assets/image-20230912205611698.png)

## 5.2.4 缓冲区管理

![image-20230912205804434](assets/image-20230912205804434.png)

![image-20230912210011688](assets/image-20230912210011688.png)

![image-20230912210520467](assets/image-20230912210520467.png)

![image-20230912210545429](assets/image-20230912210545429.png)

![image-20230912210557602](assets/image-20230912210557602.png)

![image-20230912210623466](assets/image-20230912210623466.png)

![image-20230912210802887](assets/image-20230912210802887.png)

![image-20230912211005903](assets/image-20230912211005903.png)

![image-20230912211054109](assets/image-20230912211054109.png)

![image-20230912211218476](assets/image-20230912211218476.png)

![image-20230912211323207](assets/image-20230912211323207.png)

![image-20230912211551064](assets/image-20230912211551064.png)

![image-20230912211618643](assets/image-20230912211618643.png)

## 5.3.1 磁盘的结构

![image-20230912211830227](assets/image-20230912211830227.png)

![image-20230912212039266](assets/image-20230912212039266.png)

![image-20230912212242274](assets/image-20230912212242274.png)

![image-20230912212321624](assets/image-20230912212321624.png)

![image-20230912212354952](assets/image-20230912212354952.png)



## 5.3.2 磁盘调度算法

![image-20230912213020006](assets/image-20230912213020006.png)

每一种算法都是对上一种算法的优化

![image-20230912213200361](assets/image-20230912213200361.png)

![image-20230912213444487](assets/image-20230912213444487.png)

![image-20230912213718085](assets/image-20230912213718085.png)

![image-20230912213833952](assets/image-20230912213833952.png)

![image-20230912214117501](assets/image-20230912214117501.png)

![image-20230912214231768](assets/image-20230912214231768.png)

![image-20230912214327673](assets/image-20230912214327673.png)

## 5.3.3 减少磁盘延迟时间的方法

![image-20230912214615260](assets/image-20230912214615260.png)

![image-20230912214740687](assets/image-20230912214740687.png)

![image-20230912215103295](assets/image-20230912215103295.png)

![image-20230912215329814](assets/image-20230912215329814.png)

![image-20230912215429895](assets/image-20230912215429895.png)

![image-20230912215505058](assets/image-20230912215505058.png)

## 5.3.4 磁盘的管理

![image-20230912215703478](assets/image-20230912215703478.png)

![image-20230912220007946](assets/image-20230912220007946.png)

![image-20230912220144004](assets/image-20230912220144004.png)

![image-20230912220201947](assets/image-20230912220201947.png)

## 5.3.5 固态硬盘SSD

![image-20230912220237084](assets/image-20230912220237084.png)

固态硬盘读写的基本单位是页，可以把页当作为机械硬盘的扇区

固态硬盘的块对应为机械硬盘的一个磁道

![image-20230912220554659](assets/image-20230912220554659.png)

