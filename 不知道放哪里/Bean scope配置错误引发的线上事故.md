## 背景介绍

我们项目是一个小型的隐形眼镜电商网站，运行时间有十几年了。



项目技术采用的Struts1 + Hibernate + Oracle，由于Struts1版本存在漏洞风险，所以需要升级到Struts2。



## 线上问题

我们收到客户的邮件说，他的信用卡有两笔支付记录，但是他只下过一单。



## 排查过程

我们在数据库查了他的信用卡支付记录，确实有两笔支付记录，并且下单用户不同，购买的商品不同，收货地址距离不同并且相距很远。于是排除了重复扣款的可能。可以确认就是两个用户的订单，使用了同一张信用卡支付。



> 我们下面将没有花钱就买到了商品的用户成为**用户A**，而这位被多刷信用卡的用户成为**用户B**

// todo



### 流程图

![image-20231226133704664](Bean scope配置错误引发的线上事故.assets/image-20231226133704664.png)