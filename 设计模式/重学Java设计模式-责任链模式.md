## 简介

**责任链模式**是一种行为设计模式，允许你将请求沿着处理者链进行发送。收到请求后，每个处理者均可对请求进行处理，或将其传递给链上的下个处理者。

## 1. 定义与基本概念

### 定义

责任链模式是一种对象行为型模式，它包含多个对象，每个对象都包含对下一个对象的引用，构成一条链。

请求在这个链上传递，每个对象都可以选择处理请求或者传递给下一个处理者，甚至停止传递请求直接返回。

责任链模式定义了一种使多个对象都有机会处理请求的机制，从而解耦请求的发送者和接收者。

请求的发送者不必知道链的结构，也不必知道哪个对象会最终处理这个请求。

### 基本概念

- 处理者（Handler）
  处理者是责任链中的对象，它们负责处理请求。每个处理者都有责任决定是否能够处理该请求，如果能够处理，则进行处理；如果不能处理，则将请求传递给链中的下一个处理者。

- 抽象处理者（Abstract Handler）
  这是一个包含所有具体处理者共有方法的抽象类或接口。它通常包含至少两个主要的方法：
  - handleRequest()：用于接收请求，并决定如何处理它。
  - setSuccessor()：用于设置下一个处理者，建立责任链。

- 具体处理者（Concrete Handler）
  这些是抽象处理者的子类，实现了具体的处理逻辑。每个具体处理者都知道它能够处理哪些请求，以及如何处理这些请求。
- 客户端（Client）
  客户端是创建责任链和发送请求的代码部分。客户端通常不知道哪个具体处理者会最终处理请求，它只需要将请求发送到链的开始即可。

## 2. 应用场景

**多个对象可能处理同一个请求**：在不知道具体哪个对象处理请求时，可以使用责任链模式。如：审批流程，日志记录系统，权限控制系统。

**处理者对象集合需要动态确定**：在运行时根据需要动态调整处理者顺序的场景。如审批流程中动态增加审批步骤或审批人。

**多环节拦截处理**：通常涉及全链路处理，需要历经所有环节后才能到达终点。如Java过滤器Filter、组装生产链路等。

## 3. 场景案例



## 4. 代码一把梭



## 5. 观察者模式重构代码



## 6. 观察者模式的优缺点

**优势**：

1. **降低耦合度**：请求者和处理者之间解耦，增加新的请求处理者不会影响其他处理者。
2. **增强系统的灵活性**：可以动态地添加或移除处理者，或者改变处理者的顺序。
3. **扩展性好**：新增处理者不需要修改现有的代码，符合开闭原则。
4. **符合单一职责原则**：每个处理者只处理它能够处理的请求。

**局限性**：

1. **性能问题**：如果责任链过长，请求可能会经过多个处理者，这可能导致性能下降。
2. **处理结果不明确**：请求可能在链中被多个处理者处理，导致结果不明确。
3. **调试困难**：如果责任链复杂，调试时可能难以追踪请求的处理路径。
4. **可能引起循环调用**：如果链中的处理者引用不当，可能会引起循环调用，导致系统崩溃



